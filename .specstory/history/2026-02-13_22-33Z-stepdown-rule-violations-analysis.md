<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session cdd823d5-83eb-4053-93b9-5d4bdad93615 (2026-02-13 22:33Z) -->

# Stepdown rule violations analysis (2026-02-13 22:33Z)

_**User**_


I used the current version of this plugin in my project at @~/WebstormProjects/ff-elysia , and got unexpected results.

I first ran `stepdown-rule` to find the violations, then ran `stepdown-rule --fix`, which should have fixed all of the violations from the first command, then ran `stepdown-rule` one more time to verify the issues were fixed, but there were still many violations detected. See console output below:
```
✘ graff@naiur  ~/WebstormProjects/ff-elysia   refactor-rewrite ±  stepdown-rule 
src/categories.ts:14:1 - Stepdown violation: getCategoryById calls getCategoryByIdUnsafe which appears above it
  call site: src/categories.ts:15:19
  dependency declared at: src/categories.ts:3:1
src/categories.ts:22:1 - Stepdown violation: getCategoryBySlug calls getCategoryBySlugUnsafe which appears above it
  call site: src/categories.ts:23:19
  dependency declared at: src/categories.ts:8:1
src/categories.ts:30:1 - Stepdown violation: findCategoryById calls getCategoryByIdUnsafe which appears above it
  call site: src/categories.ts:31:9
  dependency declared at: src/categories.ts:3:1
src/categories.ts:34:1 - Stepdown violation: findCategoryBySlug calls getCategoryBySlugUnsafe which appears above it
  call site: src/categories.ts:35:9
  dependency declared at: src/categories.ts:8:1
src/components/admin.ts:122:1 - Stepdown violation: orderDetails calls getStatusColor which appears above it
  call site: src/components/admin.ts:165:153
  dependency declared at: src/components/admin.ts:108:1
src/components/admin.ts:171:1 - Stepdown violation: ordersList calls getStatusColor which appears above it
  call site: src/components/admin.ts:206:112
  dependency declared at: src/components/admin.ts:108:1
src/components/orders.ts:19:1 - Stepdown violation: customerOrdersList calls formatPriceForDisplay which appears above it
  call site: src/components/orders.ts:50:98
  dependency declared at: src/components/orders.ts:4:1
src/components/orders.ts:19:1 - Stepdown violation: customerOrdersList calls getStatusColor which appears above it
  call site: src/components/orders.ts:52:114
  dependency declared at: src/components/orders.ts:7:1
src/components/orders.ts:69:1 - Stepdown violation: customerOrderDetails calls getStatusColor which appears above it
  call site: src/components/orders.ts:82:193
  dependency declared at: src/components/orders.ts:7:1
src/components/orders.ts:69:1 - Stepdown violation: customerOrderDetails calls formatPriceForDisplay which appears above it
  call site: src/components/orders.ts:104:152
  dependency declared at: src/components/orders.ts:4:1
src/components/orders.ts:69:1 - Stepdown violation: customerOrderDetails calls formatPriceForDisplay which appears above it
  call site: src/components/orders.ts:105:152
  dependency declared at: src/components/orders.ts:4:1
src/components/orders.ts:69:1 - Stepdown violation: customerOrderDetails calls formatPriceForDisplay which appears above it
  call site: src/components/orders.ts:112:158
  dependency declared at: src/components/orders.ts:4:1
src/components/shop.ts:45:1 - Stepdown violation: shopLayout calls shopSidebar which appears above it
  call site: src/components/shop.ts:55:9
  dependency declared at: src/components/shop.ts:25:1
src/components/shop.ts:45:1 - Stepdown violation: shopLayout calls shopBreadcrumb which appears above it
  call site: src/components/shop.ts:57:11
  dependency declared at: src/components/shop.ts:5:1
src/components/shop.ts:104:1 - Stepdown violation: shopLandingContent calls categoryGrid which appears above it
  call site: src/components/shop.ts:116:7
  dependency declared at: src/components/shop.ts:91:1
src/components/shop.ts:119:1 - Stepdown violation: shopLanding calls shopLayout which appears above it
  call site: src/components/shop.ts:128:9
  dependency declared at: src/components/shop.ts:45:1
src/components/shop.ts:119:1 - Stepdown violation: shopLanding calls shopLandingContent which appears above it
  call site: src/components/shop.ts:128:37
  dependency declared at: src/components/shop.ts:104:1
src/components/shop.ts:187:1 - Stepdown violation: categoryProductList calls shopLayout which appears above it
  call site: src/components/shop.ts:201:9
  dependency declared at: src/components/shop.ts:45:1
src/components/shop.ts:187:1 - Stepdown violation: categoryProductList calls categoryProductListContent which appears above it
  call site: src/components/shop.ts:201:37
  dependency declared at: src/components/shop.ts:168:1
src/components/shop.ts:239:1 - Stepdown violation: shopProductDetail calls shopLayout which appears above it
  call site: src/components/shop.ts:257:9
  dependency declared at: src/components/shop.ts:45:1
src/components/shop.ts:239:1 - Stepdown violation: shopProductDetail calls shopProductDetailContent which appears above it
  call site: src/components/shop.ts:257:37
  dependency declared at: src/components/shop.ts:203:1
src/di/admin-composition.ts:50:1 - Stepdown violation: composeAdminDomain calls createAdminPresenter which appears above it
  call site: src/di/admin-composition.ts:52:20
  dependency declared at: src/di/admin-composition.ts:22:1
src/di/admin-composition.ts:50:1 - Stepdown violation: composeAdminDomain calls createAdminUseCase which appears above it
  call site: src/di/admin-composition.ts:54:18
  dependency declared at: src/di/admin-composition.ts:28:1
src/di/admin-composition.ts:50:1 - Stepdown violation: composeAdminDomain calls createAdminController which appears above it
  call site: src/di/admin-composition.ts:56:21
  dependency declared at: src/di/admin-composition.ts:40:1
src/di/cart-composition.ts:48:1 - Stepdown violation: composeCartDomain calls sessionStoreToRepository which appears above it
  call site: src/di/cart-composition.ts:53:28
  dependency declared at: src/di/cart-composition.ts:23:1
src/di/checkout-composition.ts:29:1 - Stepdown violation: composeCheckoutDomain calls createCheckoutController which appears above it
  call site: src/di/checkout-composition.ts:41:21
  dependency declared at: src/di/checkout-composition.ts:19:1
src/di/container.ts:60:1 - Stepdown violation: createMockServices calls createInMemoryRepositories which appears above it
  call site: src/di/container.ts:61:52
  dependency declared at: src/di/container.ts:42:1
src/di/container.ts:73:1 - Stepdown violation: createSurrealServices calls createSurrealRepositories which appears above it
  call site: src/di/container.ts:79:52
  dependency declared at: src/di/container.ts:50:1
src/di/container.ts:94:1 - Stepdown violation: createInMemoryServices calls createInMemoryRepositories which appears above it
  call site: src/di/container.ts:96:52
  dependency declared at: src/di/container.ts:42:1
src/di/container.ts:116:1 - Stepdown violation: createServices calls createSurrealServices which appears above it
  call site: src/di/container.ts:122:16
  dependency declared at: src/di/container.ts:73:1
src/di/container.ts:116:1 - Stepdown violation: createServices calls createInMemoryServices which appears above it
  call site: src/di/container.ts:124:9
  dependency declared at: src/di/container.ts:94:1
src/di/shop-composition.ts:43:1 - Stepdown violation: composeShopDomain calls createProductRepository which appears above it
  call site: src/di/shop-composition.ts:45:28
  dependency declared at: src/di/shop-composition.ts:27:1
src/di/shop-composition.ts:43:1 - Stepdown violation: composeShopDomain calls createCategoryRepository which appears above it
  call site: src/di/shop-composition.ts:46:29
  dependency declared at: src/di/shop-composition.ts:33:1
src/di/webhook-composition.ts:44:1 - Stepdown violation: composeWebhookDomain calls createWebhookPresenter which appears above it
  call site: src/di/webhook-composition.ts:46:20
  dependency declared at: src/di/webhook-composition.ts:19:1
src/di/webhook-composition.ts:44:1 - Stepdown violation: composeWebhookDomain calls createWebhookUseCase which appears above it
  call site: src/di/webhook-composition.ts:48:18
  dependency declared at: src/di/webhook-composition.ts:25:1
src/di/webhook-composition.ts:44:1 - Stepdown violation: composeWebhookDomain calls createWebhookController which appears above it
  call site: src/di/webhook-composition.ts:50:21
  dependency declared at: src/di/webhook-composition.ts:34:1
src/di/wishlist-composition.ts:43:1 - Stepdown violation: composeWishlistDomain calls createWishlistPresenter which appears above it
  call site: src/di/wishlist-composition.ts:48:20
  dependency declared at: src/di/wishlist-composition.ts:17:1
src/di/wishlist-composition.ts:43:1 - Stepdown violation: composeWishlistDomain calls createWishlistUseCase which appears above it
  call site: src/di/wishlist-composition.ts:50:18
  dependency declared at: src/di/wishlist-composition.ts:23:1
src/di/wishlist-composition.ts:43:1 - Stepdown violation: composeWishlistDomain calls createWishlistController which appears above it
  call site: src/di/wishlist-composition.ts:52:21
  dependency declared at: src/di/wishlist-composition.ts:33:1
src/domains/orders/presentation/orders-presenter.ts:16:1 - Stepdown violation: createOrdersPresenter calls success which appears above it
  call site: src/domains/orders/presentation/orders-presenter.ts:22:56
  dependency declared at: src/domains/orders/presentation/orders-presenter.ts:10:1
src/domains/orders/presentation/orders-presenter.ts:16:1 - Stepdown violation: createOrdersPresenter calls success which appears above it
  call site: src/domains/orders/presentation/orders-presenter.ts:23:56
  dependency declared at: src/domains/orders/presentation/orders-presenter.ts:10:1
src/domains/orders/presentation/orders-presenter.ts:16:1 - Stepdown violation: createOrdersPresenter calls error which appears above it
  call site: src/domains/orders/presentation/orders-presenter.ts:24:47
  dependency declared at: src/domains/orders/presentation/orders-presenter.ts:13:1
src/domains/shop/presentation/shop-presenter.ts:26:1 - Stepdown violation: createShopPresenter calls success which appears above it
  call site: src/domains/shop/presentation/shop-presenter.ts:32:49
  dependency declared at: src/domains/shop/presentation/shop-presenter.ts:14:1
src/domains/shop/presentation/shop-presenter.ts:26:1 - Stepdown violation: createShopPresenter calls notFound which appears above it
  call site: src/domains/shop/presentation/shop-presenter.ts:34:27
  dependency declared at: src/domains/shop/presentation/shop-presenter.ts:17:1
src/domains/shop/presentation/shop-presenter.ts:26:1 - Stepdown violation: createShopPresenter calls success which appears above it
  call site: src/domains/shop/presentation/shop-presenter.ts:34:44
  dependency declared at: src/domains/shop/presentation/shop-presenter.ts:14:1
src/domains/shop/presentation/shop-presenter.ts:26:1 - Stepdown violation: createShopPresenter calls redirect which appears above it
  call site: src/domains/shop/presentation/shop-presenter.ts:36:52
  dependency declared at: src/domains/shop/presentation/shop-presenter.ts:20:1
src/domains/shop/presentation/shop-presenter.ts:26:1 - Stepdown violation: createShopPresenter calls notFound which appears above it
  call site: src/domains/shop/presentation/shop-presenter.ts:37:35
  dependency declared at: src/domains/shop/presentation/shop-presenter.ts:17:1
src/domains/shop/presentation/shop-presenter.ts:26:1 - Stepdown violation: createShopPresenter calls success which appears above it
  call site: src/domains/shop/presentation/shop-presenter.ts:38:13
  dependency declared at: src/domains/shop/presentation/shop-presenter.ts:14:1
src/domains/shop/presentation/shop-presenter.ts:26:1 - Stepdown violation: createShopPresenter calls error which appears above it
  call site: src/domains/shop/presentation/shop-presenter.ts:40:47
  dependency declared at: src/domains/shop/presentation/shop-presenter.ts:23:1
src/entities/categories.ts:18:1 - Stepdown violation: getCategoryBySlug calls getCategoryBySlugUnsafe which appears above it
  call site: src/entities/categories.ts:19:19
  dependency declared at: src/entities/categories.ts:4:1
src/entities/categories.ts:33:1 - Stepdown violation: findCategoryBySlug calls getCategoryBySlugUnsafe which appears above it
  call site: src/entities/categories.ts:35:10
  dependency declared at: src/entities/categories.ts:4:1
src/handlers/admin-handlers.ts:46:1 - Stepdown violation: handlePostAdminLogin calls validateAdminCredentials which appears above it
  call site: src/handlers/admin-handlers.ts:53:6
  dependency declared at: src/handlers/admin-handlers.ts:14:1
src/handlers/admin-handlers.ts:46:1 - Stepdown violation: handlePostAdminLogin calls createAdminSessionToken which appears above it
  call site: src/handlers/admin-handlers.ts:54:24
  dependency declared at: src/handlers/admin-handlers.ts:25:1
src/handlers/admin-handlers.ts:137:1 - Stepdown violation: handlePutUpdateProduct calls findAdminProductIndex which appears above it
  call site: src/handlers/admin-handlers.ts:154:16
  dependency declared at: src/handlers/admin-handlers.ts:31:1
src/handlers/cart-handlers.ts:93:1 - Stepdown violation: handleGetCart calls buildCartWithProducts which appears above it
  call site: src/handlers/cart-handlers.ts:98:27
  dependency declared at: src/handlers/cart-handlers.ts:13:1
src/handlers/cart-handlers.ts:93:1 - Stepdown violation: handleGetCart calls calculateCartTotal which appears above it
  call site: src/handlers/cart-handlers.ts:99:16
  dependency declared at: src/handlers/cart-handlers.ts:33:1
src/handlers/cart-handlers.ts:106:1 - Stepdown violation: handlePostCart calls addToCart which appears above it
  call site: src/handlers/cart-handlers.ts:119:18
  dependency declared at: src/handlers/cart-handlers.ts:48:1
src/handlers/cart-handlers.ts:106:1 - Stepdown violation: handlePostCart calls calculateCartCount which appears above it
  call site: src/handlers/cart-handlers.ts:120:20
  dependency declared at: src/handlers/cart-handlers.ts:42:1
src/handlers/cart-handlers.ts:129:1 - Stepdown violation: handlePutCart calls updateCartItem which appears above it
  call site: src/handlers/cart-handlers.ts:135:18
  dependency declared at: src/handlers/cart-handlers.ts:64:1
src/handlers/cart-handlers.ts:152:1 - Stepdown violation: handleDeleteCart calls removeFromCart which appears above it
  call site: src/handlers/cart-handlers.ts:153:18
  dependency declared at: src/handlers/cart-handlers.ts:81:1
src/handlers/checkout-handlers.ts:96:1 - Stepdown violation: handleGetCheckout calls buildCheckoutCart which appears above it
  call site: src/handlers/checkout-handlers.ts:97:27
  dependency declared at: src/handlers/checkout-handlers.ts:13:1
src/handlers/checkout-handlers.ts:96:1 - Stepdown violation: handleGetCheckout calls calculateCheckoutTotal which appears above it
  call site: src/handlers/checkout-handlers.ts:98:16
  dependency declared at: src/handlers/checkout-handlers.ts:35:1
src/handlers/checkout-handlers.ts:105:1 - Stepdown violation: handlePostCheckout calls isCartEmpty which appears above it
  call site: src/handlers/checkout-handlers.ts:115:6
  dependency declared at: src/handlers/checkout-handlers.ts:54:1
src/handlers/checkout-handlers.ts:105:1 - Stepdown violation: handlePostCheckout calls buildStripeLineItems which appears above it
  call site: src/handlers/checkout-handlers.ts:126:21
  dependency declared at: src/handlers/checkout-handlers.ts:60:1
src/handlers/checkout-handlers.ts:105:1 - Stepdown violation: handlePostCheckout calls buildStripeSessionUrls which appears above it
  call site: src/handlers/checkout-handlers.ts:127:16
  dependency declared at: src/handlers/checkout-handlers.ts:82:1
src/handlers/product-handlers.ts:10:1 - Stepdown violation: removeProduct calls findProductIndex which appears above it
  call site: src/handlers/product-handlers.ts:11:16
  dependency declared at: src/handlers/product-handlers.ts:7:1
src/handlers/webhook-handlers.ts:79:1 - Stepdown violation: handleStripeWebhook calls isCheckoutCompletedEvent which appears above it
  call site: src/handlers/webhook-handlers.ts:83:6
  dependency declared at: src/handlers/webhook-handlers.ts:50:1
src/handlers/webhook-handlers.ts:79:1 - Stepdown violation: handleStripeWebhook calls handleCheckoutSessionCompleted which appears above it
  call site: src/handlers/webhook-handlers.ts:85:18
  dependency declared at: src/handlers/webhook-handlers.ts:11:1
src/infrastructure/memory/order-repository.ts:26:1 - Stepdown violation: buildOrder calls generateOrderId which appears above it
  call site: src/infrastructure/memory/order-repository.ts:27:6
  dependency declared at: src/infrastructure/memory/order-repository.ts:24:1
src/infrastructure/memory/order-repository.ts:26:1 - Stepdown violation: buildOrder calls calculateOrderTotal which appears above it
  call site: src/infrastructure/memory/order-repository.ts:32:9
  dependency declared at: src/infrastructure/memory/order-repository.ts:22:1
src/infrastructure/memory/product-repository.ts:14:1 - Stepdown violation: doCreate calls generateSlug which appears above it
  call site: src/infrastructure/memory/product-repository.ts:18:9
  dependency declared at: src/infrastructure/memory/product-repository.ts:5:1
src/infrastructure/memory/product-repository.ts:55:1 - Stepdown violation: repositoryCreate calls doCreate which appears above it
  call site: src/infrastructure/memory/product-repository.ts:59:21
  dependency declared at: src/infrastructure/memory/product-repository.ts:14:1
src/infrastructure/memory/product-repository.ts:63:1 - Stepdown violation: repositoryUpdate calls findProductIndex which appears above it
  call site: src/infrastructure/memory/product-repository.ts:68:16
  dependency declared at: src/infrastructure/memory/product-repository.ts:11:1
src/infrastructure/memory/product-repository.ts:63:1 - Stepdown violation: repositoryUpdate calls doUpdate which appears above it
  call site: src/infrastructure/memory/product-repository.ts:76:25
  dependency declared at: src/infrastructure/memory/product-repository.ts:21:1
src/infrastructure/memory/product-repository.ts:80:1 - Stepdown violation: repositoryDelete calls findProductIndex which appears above it
  call site: src/infrastructure/memory/product-repository.ts:81:16
  dependency declared at: src/infrastructure/memory/product-repository.ts:11:1
src/infrastructure/memory/product-repository.ts:88:1 - Stepdown violation: repositoryDecrementStock calls findProductIndex which appears above it                                                                                                                                       
  call site: src/infrastructure/memory/product-repository.ts:93:16
  dependency declared at: src/infrastructure/memory/product-repository.ts:11:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryGetById which appears above it                                                                                                                              
  call site: src/infrastructure/memory/product-repository.ts:110:35
  dependency declared at: src/infrastructure/memory/product-repository.ts:29:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryGetBySlug which appears above it                                                                                                                            
  call site: src/infrastructure/memory/product-repository.ts:111:41
  dependency declared at: src/infrastructure/memory/product-repository.ts:33:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryGetByCategory which appears above it                                                                                                                        
  call site: src/infrastructure/memory/product-repository.ts:112:50
  dependency declared at: src/infrastructure/memory/product-repository.ts:40:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryGetAll which appears above it                                                                                                                               
  call site: src/infrastructure/memory/product-repository.ts:113:17
  dependency declared at: src/infrastructure/memory/product-repository.ts:47:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryExists which appears above it                                                                                                                               
  call site: src/infrastructure/memory/product-repository.ts:114:34
  dependency declared at: src/infrastructure/memory/product-repository.ts:51:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryCreate which appears above it                                                                                                                               
  call site: src/infrastructure/memory/product-repository.ts:115:58
  dependency declared at: src/infrastructure/memory/product-repository.ts:55:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryUpdate which appears above it                                                                                                                               
  call site: src/infrastructure/memory/product-repository.ts:117:4
  dependency declared at: src/infrastructure/memory/product-repository.ts:63:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryDelete which appears above it                                                                                                                               
  call site: src/infrastructure/memory/product-repository.ts:118:34
  dependency declared at: src/infrastructure/memory/product-repository.ts:80:1
src/infrastructure/memory/product-repository.ts:107:1 - Stepdown violation: createInMemoryProductRepository calls repositoryDecrementStock which appears above it                                                                                                                       
  call site: src/infrastructure/memory/product-repository.ts:120:4
  dependency declared at: src/infrastructure/memory/product-repository.ts:88:1
src/infrastructure/surreal/category-repository.ts:27:1 - Stepdown violation: mapValidCategories calls validateCategory which appears above it                                                                                                                                           
  call site: src/infrastructure/surreal/category-repository.ts:28:30
  dependency declared at: src/infrastructure/surreal/category-repository.ts:16:1
src/infrastructure/surreal/category-repository.ts:33:1 - Stepdown violation: parseSingleCategory calls validateCategory which appears above it                                                                                                                                          
  call site: src/infrastructure/surreal/category-repository.ts:35:9
  dependency declared at: src/infrastructure/surreal/category-repository.ts:16:1
src/infrastructure/surreal/category-repository.ts:41:1 - Stepdown violation: createSurrealCategoryRepository calls parseSingleCategory which appears above it                                                                                                                           
  call site: src/infrastructure/surreal/category-repository.ts:105:20
  dependency declared at: src/infrastructure/surreal/category-repository.ts:33:1
src/infrastructure/surreal/category-repository.ts:41:1 - Stepdown violation: createSurrealCategoryRepository calls parseSingleCategory which appears above it                                                                                                                           
  call site: src/infrastructure/surreal/category-repository.ts:113:19
  dependency declared at: src/infrastructure/surreal/category-repository.ts:33:1
src/infrastructure/surreal/connection.ts:64:1 - Stepdown violation: ensureConnected calls createConnection which appears above it
  call site: src/infrastructure/surreal/connection.ts:70:21
  dependency declared at: src/infrastructure/surreal/connection.ts:35:1
src/infrastructure/surreal/order-repository.ts:123:1 - Stepdown violation: mapValidOrders calls validateAndParseOrder which appears above it
  call site: src/infrastructure/surreal/order-repository.ts:125:19
  dependency declared at: src/infrastructure/surreal/order-repository.ts:110:1
src/infrastructure/surreal/order-repository.ts:127:1 - Stepdown violation: parseSingleOrder calls validateAndParseOrder which appears above it                                                                                                                                          
  call site: src/infrastructure/surreal/order-repository.ts:128:21
  dependency declared at: src/infrastructure/surreal/order-repository.ts:110:1
src/infrastructure/surreal/product-repository.ts:20:1 - Stepdown violation: parseSingleProduct calls validateProduct which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:22:9
  dependency declared at: src/infrastructure/surreal/product-repository.ts:12:1
src/infrastructure/surreal/product-repository.ts:24:1 - Stepdown violation: mapValidProducts calls validateProduct which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:25:31
  dependency declared at: src/infrastructure/surreal/product-repository.ts:12:1
src/infrastructure/surreal/product-repository.ts:65:1 - Stepdown violation: findById calls parseSingleProduct which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:68:10
  dependency declared at: src/infrastructure/surreal/product-repository.ts:20:1
src/infrastructure/surreal/product-repository.ts:74:1 - Stepdown violation: findBySlug calls parseSingleProduct which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:79:10
  dependency declared at: src/infrastructure/surreal/product-repository.ts:20:1
src/infrastructure/surreal/product-repository.ts:85:1 - Stepdown violation: findByCategory calls mapValidProducts which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:92:10
  dependency declared at: src/infrastructure/surreal/product-repository.ts:24:1
src/infrastructure/surreal/product-repository.ts:98:1 - Stepdown violation: findAll calls mapValidProducts which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:102:10
  dependency declared at: src/infrastructure/surreal/product-repository.ts:24:1
src/infrastructure/surreal/product-repository.ts:108:1 - Stepdown violation: updateProduct calls findById which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:113:25
  dependency declared at: src/infrastructure/surreal/product-repository.ts:65:1
src/infrastructure/surreal/product-repository.ts:108:1 - Stepdown violation: updateProduct calls buildUpdateSetClause which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:115:27
  dependency declared at: src/infrastructure/surreal/product-repository.ts:27:1
src/infrastructure/surreal/product-repository.ts:108:1 - Stepdown violation: updateProduct calls validateProduct which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:122:9
  dependency declared at: src/infrastructure/surreal/product-repository.ts:12:1
src/infrastructure/surreal/product-repository.ts:124:1 - Stepdown violation: decrementStock calls validateProduct which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:140:10
  dependency declared at: src/infrastructure/surreal/product-repository.ts:12:1
src/infrastructure/surreal/product-repository.ts:146:1 - Stepdown violation: createProduct calls generateProductId which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:150:13
  dependency declared at: src/infrastructure/surreal/product-repository.ts:56:1
src/infrastructure/surreal/product-repository.ts:146:1 - Stepdown violation: createProduct calls generateSlug which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:151:15
  dependency declared at: src/infrastructure/surreal/product-repository.ts:59:1
src/infrastructure/surreal/product-repository.ts:146:1 - Stepdown violation: createProduct calls validateProduct which appears above it
  call site: src/infrastructure/surreal/product-repository.ts:157:9
  dependency declared at: src/infrastructure/surreal/product-repository.ts:12:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls findById which appears above it                                                                                                                                       
  call site: src/infrastructure/surreal/product-repository.ts:165:41
  dependency declared at: src/infrastructure/surreal/product-repository.ts:65:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls findBySlug which appears above it                                                                                                                                     
  call site: src/infrastructure/surreal/product-repository.ts:166:45
  dependency declared at: src/infrastructure/surreal/product-repository.ts:74:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls findByCategory which appears above it                                                                                                                                 
  call site: src/infrastructure/surreal/product-repository.ts:167:42
  dependency declared at: src/infrastructure/surreal/product-repository.ts:85:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls findAll which appears above it                                                                                                                                        
  call site: src/infrastructure/surreal/product-repository.ts:168:17
  dependency declared at: src/infrastructure/surreal/product-repository.ts:98:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls findById which appears above it                                                                                                                                       
  call site: src/infrastructure/surreal/product-repository.ts:169:40
  dependency declared at: src/infrastructure/surreal/product-repository.ts:65:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls createProduct which appears above it                                                                                                                                  
  call site: src/infrastructure/surreal/product-repository.ts:170:58
  dependency declared at: src/infrastructure/surreal/product-repository.ts:146:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls updateProduct which appears above it                                                                                                                                  
  call site: src/infrastructure/surreal/product-repository.ts:171:54
  dependency declared at: src/infrastructure/surreal/product-repository.ts:108:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls deleteProduct which appears above it                                                                                                                                  
  call site: src/infrastructure/surreal/product-repository.ts:172:27
  dependency declared at: src/infrastructure/surreal/product-repository.ts:159:1
src/infrastructure/surreal/product-repository.ts:163:1 - Stepdown violation: createSurrealProductRepository calls decrementStock which appears above it                                                                                                                                 
  call site: src/infrastructure/surreal/product-repository.ts:173:53
  dependency declared at: src/infrastructure/surreal/product-repository.ts:124:1
src/infrastructure/surreal/wishlist-repository.ts:21:1 - Stepdown violation: parseSingleWishlist calls validateWishlist which appears above it                                                                                                                                          
  call site: src/infrastructure/surreal/wishlist-repository.ts:23:9
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:13:1
src/infrastructure/surreal/wishlist-repository.ts:52:1 - Stepdown violation: removeItemFromWishlist calls validateWishlist which appears above it                                                                                                                                       
  call site: src/infrastructure/surreal/wishlist-repository.ts:66:10
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:13:1
src/infrastructure/surreal/wishlist-repository.ts:72:1 - Stepdown violation: addItemToWishlist calls validateWishlist which appears above it
  call site: src/infrastructure/surreal/wishlist-repository.ts:97:10
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:13:1
src/infrastructure/surreal/wishlist-repository.ts:103:1 - Stepdown violation: createWishlist calls generateWishlistId which appears above it
  call site: src/infrastructure/surreal/wishlist-repository.ts:108:14
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:25:1
src/infrastructure/surreal/wishlist-repository.ts:103:1 - Stepdown violation: createWishlist calls validateWishlist which appears above it
  call site: src/infrastructure/surreal/wishlist-repository.ts:115:10
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:13:1
src/infrastructure/surreal/wishlist-repository.ts:121:1 - Stepdown violation: findByUserId calls parseSingleWishlist which appears above it
  call site: src/infrastructure/surreal/wishlist-repository.ts:127:10
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:21:1
src/infrastructure/surreal/wishlist-repository.ts:133:1 - Stepdown violation: createSurrealWishlistRepository calls findByUserId which appears above it                                                                                                                                 
  call site: src/infrastructure/surreal/wishlist-repository.ts:135:36
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:121:1
src/infrastructure/surreal/wishlist-repository.ts:133:1 - Stepdown violation: createSurrealWishlistRepository calls createWishlist which appears above it                                                                                                                               
  call site: src/infrastructure/surreal/wishlist-repository.ts:137:4
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:103:1
src/infrastructure/surreal/wishlist-repository.ts:133:1 - Stepdown violation: createSurrealWishlistRepository calls addItemToWishlist which appears above it                                                                                                                            
  call site: src/infrastructure/surreal/wishlist-repository.ts:139:4
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:72:1
src/infrastructure/surreal/wishlist-repository.ts:133:1 - Stepdown violation: createSurrealWishlistRepository calls removeItemFromWishlist which appears above it                                                                                                                       
  call site: src/infrastructure/surreal/wishlist-repository.ts:141:4
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:52:1
src/infrastructure/surreal/wishlist-repository.ts:133:1 - Stepdown violation: createSurrealWishlistRepository calls clearWishlist which appears above it                                                                                                                                
  call site: src/infrastructure/surreal/wishlist-repository.ts:142:30
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:40:1
src/infrastructure/surreal/wishlist-repository.ts:133:1 - Stepdown violation: createSurrealWishlistRepository calls wishlistExists which appears above it                                                                                                                               
  call site: src/infrastructure/surreal/wishlist-repository.ts:143:31
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:28:1
src/instrumentation.ts:25:1 - Stepdown violation: createSpan calls setSpanAttributes which appears above it
  call site: src/instrumentation.ts:45:5
  dependency declared at: src/instrumentation.ts:13:1
src/instrumentation.ts:25:1 - Stepdown violation: createSpan calls recordSpanError which appears above it
  call site: src/instrumentation.ts:56:5
  dependency declared at: src/instrumentation.ts:4:1
src/plugins/session.ts:40:3 - Stepdown violation: ensureSessionCookie calls getSessionId which appears above it
  call site: src/plugins/session.ts:41:22
  dependency declared at: src/plugins/session.ts:27:3
src/routes/checkout.ts:59:1 - Stepdown violation: createCheckoutDomain calls sessionStoreToRepository which appears above it
  call site: src/routes/checkout.ts:63:28
  dependency declared at: src/routes/checkout.ts:32:1
src/services/email-templates.ts:23:1 - Stepdown violation: renderOrderReceiptEmail calls escapeHtml which appears above it
  call site: src/services/email-templates.ts:29:7
  dependency declared at: src/services/email-templates.ts:12:1
src/services/email-templates.ts:23:1 - Stepdown violation: renderOrderReceiptEmail calls escapeHtml which appears above it
  call site: src/services/email-templates.ts:74:14
  dependency declared at: src/services/email-templates.ts:12:1
src/services/email-templates.ts:23:1 - Stepdown violation: renderOrderReceiptEmail calls escapeHtml which appears above it
  call site: src/services/email-templates.ts:129:34
  dependency declared at: src/services/email-templates.ts:12:1
src/services/email.ts:30:1 - Stepdown violation: sendOrderReceiptEmail calls createTransporter which appears above it
  call site: src/services/email.ts:44:24
  dependency declared at: src/services/email.ts:16:1
src/taxonomy.ts:22:1 - Stepdown violation: getProductsByCategory calls getProductCategoryId which appears above it
  call site: src/taxonomy.ts:23:32
  dependency declared at: src/taxonomy.ts:9:1
src/taxonomy.ts:25:1 - Stepdown violation: findProductBySlug calls getProductSlug which appears above it
  call site: src/taxonomy.ts:26:30
  dependency declared at: src/taxonomy.ts:19:1
src/taxonomy.ts:31:1 - Stepdown violation: getCategoriesWithProducts calls getProductsByCategory which appears above it
  call site: src/taxonomy.ts:38:17
  dependency declared at: src/taxonomy.ts:22:1
src/taxonomy.ts:41:1 - Stepdown violation: buildProductUrl calls getProductCategory which appears above it
  call site: src/taxonomy.ts:42:19
  dependency declared at: src/taxonomy.ts:12:1
src/taxonomy.ts:41:1 - Stepdown violation: buildProductUrl calls getProductSlug which appears above it
  call site: src/taxonomy.ts:43:15
  dependency declared at: src/taxonomy.ts:19:1
src/test-fixtures.ts:12:1 - Stepdown violation: createTestProduct calls getTestCategoryId which appears above it
  call site: src/test-fixtures.ts:13:25
  dependency declared at: src/test-fixtures.ts:3:1
src/test-fixtures.ts:26:1 - Stepdown violation: createTestProducts calls createTestProduct which appears above it
  call site: src/test-fixtures.ts:28:3
  dependency declared at: src/test-fixtures.ts:12:1
src/utils/rate-limiting.ts:25:1 - Stepdown violation: createRateLimit calls generateRateLimitKey which appears above it
  call site: src/utils/rate-limiting.ts:29:16
  dependency declared at: src/utils/rate-limiting.ts:8:1
src/utils/rate-limiting.ts:25:1 - Stepdown violation: createRateLimit calls createRateLimitError which appears above it
  call site: src/utils/rate-limiting.ts:34:12
  dependency declared at: src/utils/rate-limiting.ts:15:1
src/utils/sanitization.ts:28:1 - Stepdown violation: sanitizeEmail calls sanitizeText which appears above it
  call site: src/utils/sanitization.ts:29:9
  dependency declared at: src/utils/sanitization.ts:4:1
src/utils/sanitization.ts:34:1 - Stepdown violation: sanitizeName calls sanitizeText which appears above it
  call site: src/utils/sanitization.ts:35:9
  dependency declared at: src/utils/sanitization.ts:4:1
src/utils/sanitization.ts:40:1 - Stepdown violation: sanitizeCheckoutInput calls sanitizeEmail which appears above it
  call site: src/utils/sanitization.ts:45:10
  dependency declared at: src/utils/sanitization.ts:28:1
src/utils/sanitization.ts:40:1 - Stepdown violation: sanitizeCheckoutInput calls sanitizeName which appears above it
  call site: src/utils/sanitization.ts:46:9
  dependency declared at: src/utils/sanitization.ts:34:1

Found 147 violations in 136 files                                                                                                           
 graff@naiur  ~/WebstormProjects/ff-elysia   refactor-rewrite ±  stepdown-rule --fix
✓ Fixed: src/categories.ts (reordered 4 functions)
✓ Fixed: src/components/admin.ts (reordered 1 functions)
✓ Fixed: src/components/orders.ts (reordered 2 functions)
✓ Fixed: src/components/shop.ts (reordered 0 functions)
✓ Fixed: src/di/admin-composition.ts (reordered 0 functions)
✓ Fixed: src/di/cart-composition.ts (reordered 1 functions)
✓ Fixed: src/di/checkout-composition.ts (reordered 0 functions)
✓ Fixed: src/di/container.ts (reordered 3 functions)
✓ Fixed: src/di/shop-composition.ts (reordered 0 functions)
✓ Fixed: src/di/webhook-composition.ts (reordered 0 functions)
✓ Fixed: src/di/wishlist-composition.ts (reordered 0 functions)
✓ Fixed: src/domains/orders/presentation/orders-presenter.ts (reordered 1 functions)
✓ Fixed: src/domains/shop/presentation/shop-presenter.ts (reordered 4 functions)
✓ Fixed: src/entities/categories.ts (reordered 3 functions)
✓ Fixed: src/handlers/admin-handlers.ts (reordered 0 functions)
✓ Fixed: src/handlers/cart-handlers.ts (reordered 4 functions)
✓ Fixed: src/handlers/checkout-handlers.ts (reordered 0 functions)
✓ Fixed: src/handlers/product-handlers.ts (reordered 1 functions)
✓ Fixed: src/handlers/webhook-handlers.ts (reordered 0 functions)
✓ Fixed: src/infrastructure/memory/order-repository.ts (reordered 9 functions)
✓ Fixed: src/infrastructure/memory/product-repository.ts (reordered 7 functions)
✓ Fixed: src/infrastructure/surreal/category-repository.ts (reordered 3 functions)
✓ Fixed: src/infrastructure/surreal/connection.ts (reordered 2 functions)
✓ Fixed: src/infrastructure/surreal/order-repository.ts (reordered 1 functions)
✓ Fixed: src/infrastructure/surreal/product-repository.ts (reordered 6 functions)
✓ Fixed: src/infrastructure/surreal/wishlist-repository.ts (reordered 5 functions)
✓ Fixed: src/instrumentation.ts (reordered 0 functions)
✓ Fixed: src/plugins/session.ts (reordered 0 functions)
✓ Fixed: src/routes/checkout.ts (reordered 1 functions)
✓ Fixed: src/services/email-templates.ts (reordered 1 functions)
✓ Fixed: src/services/email.ts (reordered 2 functions)
✓ Fixed: src/taxonomy.ts (reordered 0 functions)
✓ Fixed: src/test-fixtures.ts (reordered 0 functions)
✓ Fixed: src/utils/rate-limiting.ts (reordered 2 functions)
✓ Fixed: src/utils/sanitization.ts (reordered 0 functions)
 graff@naiur  ~/WebstormProjects/ff-elysia   refactor-rewrite ±  stepdown-rule      
src/di/cart-composition.ts:37:1 - Stepdown violation: composeCartDomain calls createCartPresenter which appears above it
  call site: src/di/cart-composition.ts:41:23
  dependency declared at: src/di/cart-composition.ts:18:1
src/di/cart-composition.ts:37:1 - Stepdown violation: composeCartDomain calls createCartUseCase which appears above it
  call site: src/di/cart-composition.ts:43:21
  dependency declared at: src/di/cart-composition.ts:24:1
src/di/cart-composition.ts:37:1 - Stepdown violation: composeCartDomain calls createCartController which appears above it
  call site: src/di/cart-composition.ts:45:24
  dependency declared at: src/di/cart-composition.ts:30:1
src/di/container.ts:81:1 - Stepdown violation: createMockServices calls createServices which appears above it
  call site: src/di/container.ts:83:12
  dependency declared at: src/di/container.ts:31:1
src/handlers/product-handlers.ts:16:1 - Stepdown violation: createProduct calls generateSlug which appears above it
  call site: src/handlers/product-handlers.ts:22:15
  dependency declared at: src/handlers/product-handlers.ts:10:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls generateOrderId which appears above it                                                                                                                                     
  call site: src/infrastructure/surreal/order-repository.ts:31:33
  dependency declared at: src/infrastructure/surreal/order-repository.ts:8:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls calculateOrderTotal which appears above it                                                                                                                                 
  call site: src/infrastructure/surreal/order-repository.ts:32:24
  dependency declared at: src/infrastructure/surreal/order-repository.ts:9:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls parseSingleOrder which appears above it                                                                                                                                    
  call site: src/infrastructure/surreal/order-repository.ts:48:24
  dependency declared at: src/infrastructure/surreal/order-repository.ts:10:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls parseSingleOrder which appears above it                                                                                                                                    
  call site: src/infrastructure/surreal/order-repository.ts:57:24
  dependency declared at: src/infrastructure/surreal/order-repository.ts:10:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls mapValidOrders which appears above it                                                                                                                                      
  call site: src/infrastructure/surreal/order-repository.ts:66:33
  dependency declared at: src/infrastructure/surreal/order-repository.ts:11:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls parseSingleOrder which appears above it                                                                                                                                    
  call site: src/infrastructure/surreal/order-repository.ts:79:28
  dependency declared at: src/infrastructure/surreal/order-repository.ts:10:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls parseSingleOrder which appears above it                                                                                                                                    
  call site: src/infrastructure/surreal/order-repository.ts:92:24
  dependency declared at: src/infrastructure/surreal/order-repository.ts:10:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls parseSingleOrder which appears above it                                                                                                                                    
  call site: src/infrastructure/surreal/order-repository.ts:103:28
  dependency declared at: src/infrastructure/surreal/order-repository.ts:10:1
src/infrastructure/surreal/order-repository.ts:26:1 - Stepdown violation: createSurrealOrderRepository calls mapValidOrders which appears above it                                                                                                                                      
  call site: src/infrastructure/surreal/order-repository.ts:116:33
  dependency declared at: src/infrastructure/surreal/order-repository.ts:11:1
src/infrastructure/surreal/wishlist-repository.ts:46:1 - Stepdown violation: addItemToWishlist calls findByUserId which appears above it
  call site: src/infrastructure/surreal/wishlist-repository.ts:48:32
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:22:1
src/infrastructure/surreal/wishlist-repository.ts:46:1 - Stepdown violation: addItemToWishlist calls createWishlist which appears above it
  call site: src/infrastructure/surreal/wishlist-repository.ts:51:39
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:32:1
src/infrastructure/surreal/wishlist-repository.ts:73:1 - Stepdown violation: removeItemFromWishlist calls findByUserId which appears above it                                                                                                                                           
  call site: src/infrastructure/surreal/wishlist-repository.ts:75:32
  dependency declared at: src/infrastructure/surreal/wishlist-repository.ts:22:1
src/instrumentation.ts:48:1 - Stepdown violation: createSpan calls loadOpenTelemetry which appears above it
  call site: src/instrumentation.ts:58:11
  dependency declared at: src/instrumentation.ts:36:1
src/plugins/session.ts:39:5 - Stepdown violation: ensureSessionCookie calls getSessionId which appears above it
  call site: src/plugins/session.ts:40:27
  dependency declared at: src/plugins/session.ts:26:5
src/services/email.ts:47:1 - Stepdown violation: sendOrderReceiptEmail calls renderOrderReceiptText which appears above it
  call site: src/services/email.ts:57:26
  dependency declared at: src/services/email.ts:24:1
src/utils/rate-limiting.ts:21:1 - Stepdown violation: createRateLimit calls setRateLimitHeaders which appears above it
  call site: src/utils/rate-limiting.ts:28:13
  dependency declared at: src/utils/rate-limiting.ts:8:1
src/utils/rate-limiting.ts:21:1 - Stepdown violation: createRateLimit calls setRateLimitHeaders which appears above it
  call site: src/utils/rate-limiting.ts:32:9
  dependency declared at: src/utils/rate-limiting.ts:8:1

Found 22 violations in 136 files 
```
Find and review the 22 violations that persisted after invoking the fix flag, determine the gap between what the analyzer detected and what the fixer fixed, and create beads for each failure mode.

---

_**Agent (model composer-1.5, mode Agent)**_


Analyzing the stepdown-rule codebase and the 22 persistent violations to identify the analyzer–fixer gap.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: /home/graff/WebstormProjects/stepdown-rule/package.json</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **26** results in **1** directory</summary>

Directory: **/home/graff/WebstormProjects/stepdown-rule** (26 files)

| File |
|------|
| `src/analyzer.ts` |
| `src/cli.ts` |
| `src/fixer.ts` |
| `src/services/FileService.ts` |
| `src/services/types.ts` |
| `fixtures/test-nested-violation.ts` |
| `fixtures/test-violations.ts` |
| `scripts/rule-validator.ts` |
| `tests/fixer.test.ts` |
| `tests/nested-functions.test.ts` |
| `src/config/loader.ts` |
| `tests/idempotency.test.ts` |
| `src/types.ts` |
| `fixtures/test-nested-no-return.ts` |
| `fixtures/test-nested-multiple.ts` |
| `fixtures/test-nested-correct.ts` |
| `fixtures/test-nested-arrow.ts` |
| `fixtures/test-correct.ts` |
| `tests/fixer-error-cases.test.ts` |
| `tests/analyzer-edge-cases.test.ts` |
| `tests/analyzer-specific-lines.test.ts` |
| `scripts/build.ts` |
| `src/config/schema.ts` |
| `tests/analyzer.test.ts` |
| `fixtures/test-circular.ts` |
| `src/index.ts` |

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: /home/graff/WebstormProjects/stepdown-rule/.beads/issues.jsonl</summary>

</details>
</tool-use>

---

